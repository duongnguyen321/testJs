<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="index.css" />
    <title>JS Test !</title>
  </head>
  <body>
    <script>
      // Hàm $ nhận vào một CSS selector và một thông báo lỗi (nếu có)
      const $ = (selector, errorMessage) => {
        // Kiểm tra selector có phải là một chuỗi hợp lệ
        if (typeof selector !== "string" || selector.trim() === "") {
          throw new Error("Invalid selector");
        }
        const element = document.querySelector(selector);
        // Nếu không tìm thấy phần tử, ném ra lỗi với thông báo được cung cấp hoặc mặc định
        if (!element) {
          throw new Error(
            errorMessage || `No element found matching selector: ${selector}`
          );
        }
        // Trả về phần tử đầu tiên tìm thấy được
        return element;
      };
      // Hàm $$ nhận vào một CSS selector và một thông báo lỗi (nếu có)
      const $$ = (selector, errorMessage) => {
        // Kiểm tra selector có phải là một chuỗi hợp lệ
        if (typeof selector !== "string" || selector.trim() === "") {
          throw new Error("Invalid selector");
        }
        const elements = document.querySelectorAll(selector);
        // Nếu không tìm thấy phần tử, ném ra lỗi với thông báo được cung cấp hoặc mặc định
        if (elements.length === 0) {
          throw new Error(
            errorMessage || `No elements found matching selector: ${selector}`
          );
        }
        // Chuyển đổi NodeList thành một mảng và trả về mảng các phần tử tìm thấy
        return Array.from(elements);
      };
      // Hàm html nhận vào một tên thẻ HTML và một chuỗi văn bản (tùy chọn)
      const html = (tag, text) => {
        // Nếu tên thẻ không hợp lệ, ném ra lỗi
        if (!tag || typeof tag !== "string") {
          throw new Error("Invalid tag name");
        }
        // Tạo một phần tử với tên thẻ được cung cấp
        const element = document.createElement(tag);
        // Nếu có chuỗi văn bản được cung cấp, thiết lập nội dung cho phần tử
        if (text) {
          element.textContent = text;
        }
        // Thêm phần tử vào cuối thẻ body và trả về phần tử
        $("body").appendChild(element);
        return element;
      };
      // Hàm css nhận vào một CSS selector, một thuộc tính CSS và một giá trị CSS
      const css = (selector, property, value) => {
        // Lấy ra các phần tử tương ứng với selector
        const elements = $(
          selector,
          `No element matches the selector "${selector}"`
        );
        // Nếu các phần tử là một mảng (nghĩa là có nhiều phần tử khớp với selector),
        // áp dụng thuộc tính và giá trị của style vào từng phần tử trong mảng bằng forEach
        if (elements instanceof Array) {
          elements.forEach((el) => (el.style[property] = value));
        } else {
          // Nếu phần tử không phải là một mảng (nghĩa là chỉ có một phần tử khớp với selector),
          // áp dụng thuộc tính và giá trị của style trực tiếp vào phần tử
          elements.style[property] = value;
        }
      };
      // Hàm log nhận một giá trị bất kỳ và hiển thị lên trình duyệt bằng thẻ HTML <pre> và <code>
      const log = (data) => {
        // Kiểm tra xem data có phải là undefined hay không
        if (data === undefined) {
          // Nếu data là undefined, throw một lỗi
          throw new Error("Giá trị không thể là undefined");
        } else {
          // Nếu data không phải undefined
          if (Array.isArray(data) || typeof data === "object") {
            // Nếu data là array hoặc object
            // Convert data thành chuỗi json với định dạng 2 spaces
            const jsonString = JSON.stringify(data, null, 2);
            // Tạo một thẻ code để chứa chuỗi json
            const codeElement = html("code");
            codeElement.innerText = jsonString;
            // Tạo một thẻ pre để chứa thẻ code và thêm class cho nó
            const preElement = html("pre");
            preElement.appendChild(codeElement);
            // Thêm thẻ pre vào body
            $("body").appendChild(preElement);
          } else {
            // Nếu data không phải là array hoặc object
            // Chuyển data thành string
            const stringData = String(data);
            // Tạo một thẻ div để chứa data và thêm class cho nó
            const divElement = html("div");
            divElement.classList.add("code");
            divElement.innerText = stringData;
            // Thêm thẻ div vào body
            $("body").appendChild(divElement);
          }
        }
      };
    </script>
    <script src="index.js"></script>
  </body>
</html>
